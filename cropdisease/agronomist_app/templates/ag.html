<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Agricure - Agronomist Dashboard</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Font Awesome for icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
        :root {
            --primary-green: #2e7d32;
            --secondary-green: #81c784;
            --light-green: #e8f5e9;
        }

        body {
            background-color: #f5f5f5;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            padding-top: 56px;
            /* Account for fixed navbar */
        }

        .rounded-circle {
            width: 40px;
            height: 40px;
            object-fit: cover;
            aspect-ratio: 1/1;
        }

        .navbar {
            position: fixed;
            top: 0;
            width: 100%;
            z-index: 1000;
        }

        .navbar-brand {
            font-weight: 700;
            color: var(--primary-green);
        }

        .sidebar {
            background-color: white;
            min-height: calc(100vh - 56px);
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            position: fixed;
            top: 56px;
            width: 18.666667%;
            /* Match col-lg-2 */
            height: calc(100vh - 56px);
            overflow-y: auto;
            z-index: 999;
        }

        .col-lg-10 {
            margin-left: 18.666667%;
            width: 80.333333%;
        }

        .sidebar .nav-link {
            color: #333;
            border-radius: 5px;
            margin-bottom: 5px;
        }

        .sidebar .nav-link:hover,
        .sidebar .nav-link.active {
            background-color: var(--light-green);
            color: var(--primary-green);
        }

        .sidebar .nav-link i {
            margin-right: 10px;
            color: var(--primary-green);
        }

        .card {
            border: none;
            border-radius: 10px;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .card-header {
            background-color: white;
            border-bottom: 1px solid rgba(0, 0, 0, 0.05);
            font-weight: 600;
        }

        .priority-high {
            border-left: 4px solid #d32f2f;
        }

        .priority-medium {
            border-left: 4px solid #ffa000;
        }

        .priority-low {
            border-left: 4px solid #0288d1;
        }

        .map-container {
            height: 300px;
            background-color: #e9ecef;
            border-radius: 8px;
            overflow: hidden;
        }

        .alert-counter {
            position: absolute;
            top: -8px;
            right: -8px;
            font-size: 12px;
        }

        .offcanvas {
            width: 250px !important;
        }

        @media (max-width: 991.98px) {
            .search-group {
                width: auto !important;
            }

            .sidebar {
                display: none;
                /* Hide fixed sidebar on mobile */
            }

            .col-lg-10 {
                margin-left: 0;
                width: 100%;
            }
        }
    </style>
</head>

<body>
    <!-- Top Navigation -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm">
        <div class="container-fluid">
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasSidebar"
                aria-controls="offcanvasSidebar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <a class="navbar-brand" href="#">
                <i class="fas fa-leaf me-2"></i>Agricure
            </a>

            <div class="d-flex align-items-center">
                <div class="input-group me-3 search-group" style="width: 300px;">
                    <input type="text" class="form-control" placeholder="Search farmers or diseases...">
                    <button class="btn btn-outline-success" type="button">
                        <i class="fas fa-search"></i>
                    </button>
                </div>

                <div class="dropdown me-3">
                    <button class="btn btn-light position-relative" type="button" data-bs-toggle="dropdown"
                        aria-label="Notifications">
                        <i class="fas fa-bell text-muted"></i>
                        <span
                            class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger alert-counter">
                            3
                        </span>
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li>
                            <h6 class="dropdown-header">New Alerts</h6>
                        </li>
                        <li><a class="dropdown-item" href="#">New disease reported in your region</a></li>
                        <li><a class="dropdown-item" href="#">2 farmers need follow-up</a></li>
                        <li><a class="dropdown-item" href="#">Weather alert: Heavy rain expected</a></li>
                    </ul>
                </div>

                <div class="dropdown">
                    <button class="btn btn-light dropdown-toggle" type="button" data-bs-toggle="dropdown">
                        <img src="https://plus.unsplash.com/premium_photo-1661337029136-3a2221bd5099?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxwaG90by1yZWxhdGVkfDZ8fHxlbnwwfHx8fHw%3D"
                            class="rounded-circle me-1" alt="User Profile">
                    </button>
                    <ul class="dropdown-menu dropdown-menu-end">
                        <li><a class="dropdown-item" href="#"><i class="fas fa-user me-2"></i>Profile</a></li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-cog me-2"></i>Settings</a></li>
                        <li>
                            <hr class="dropdown-divider">
                        </li>
                        <li><a class="dropdown-item" href="#"><i class="fas fa-sign-out-alt me-2"></i>Logout</a></li>
                    </ul>
                </div>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <div class="col-lg-2 p-0 sidebar d-none d-lg-block">
                <div class="p-3 mt-4">
                    <ul class="nav flex-column">
                        <li class="nav-item">
                            <a class="nav-link active" aria-current="page" href="#">
                                <i class="fas fa-tachometer-alt"></i> Dashboard
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-clipboard-list"></i> Field Reports
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-diagnoses"></i> Diagnosis Tools
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-comment-medical"></i> Advisory Center
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-chart-line"></i> Analytics
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-book"></i> Knowledge Base
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">
                                <i class="fas fa-users"></i> My Farmers
                            </a>
                        </li>
                        <li class="nav-item mt-3">
                            <a class="nav-link" href="#">
                                <i class="fas fa-cog"></i> Settings
                            </a>
                        </li>
                    </ul>
                </div>
            </div>

            <!-- Main Content -->
            <div class="col-12 col-lg-10 py-3" role="main">
                <div class="row mb-4 mt-4">
                    <div class="col-md-6">
                        <h4>Agronomist Dashboard</h4>
                        <p class="text-muted">Welcome back! Here's what's happening in your region today.</p>
                    </div>
                    <div class="col-md-6 text-md-end">
                        <button class="btn btn-success me-2" data-bs-toggle="modal" data-bs-target="#newReportModal">
                            <i class="fas fa-plus me-1"></i> New Field Report
                        </button>
                        <button class="btn btn-outline-success">
                            <i class="fas fa-calendar me-1"></i> Schedule Visit
                        </button>
                    </div>
                </div>

                <!-- Current Alerts Row -->
                <div class="row">
                    <div class="col-md-4">
                        <div class="card priority-high">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span>High Priority Cases</span>
                                <span class="badge bg-danger">3 New</span>
                            </div>
                            <div class="card-body">
                                <ul class="list-group list-group-flush">
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6>Tomato Blight</h6>
                                            <small class="text-muted">John's Farm • 5 miles away</small>
                                        </div>
                                        <button class="btn btn-sm btn-outline-danger">Review</button>
                                    </li>
                                    <li class="list-group-item d-flex justify-content-between align-items-center">
                                        <div>
                                            <h6>Corn Rust</h6>
                                            <small class="text-muted">Green Valley Co-op</small>
                                        </div>
                                        <button class="btn btn-sm btn-outline-danger">Review</button>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card priority-medium">
                            <div class="card-header">
                                Weather Advisory
                            </div>
                            <div class="card-body">
                                <div class="d-flex align-items-center mb-3">
                                    <i class="fas fa-cloud-rain fa-2x text-primary me-3"></i>
                                    <div>
                                        <h5 class="mb-0">Heavy Rain Expected</h5>
                                        <small class="text-muted">Tomorrow - 80% chance</small>
                                    </div>
                                </div>
                                <p class="card-text">Increased risk of fungal diseases. Recommend preventive fungicide
                                    application for susceptible crops.</p>
                                <button class="btn btn-sm btn-outline-warning">Send Advisory</button>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span>Quick Actions</span>
                            </div>
                            <div class="card-body">
                                <div class="d-grid gap-2">
                                    <button class="btn btn-outline-success text-start">
                                        <i class="fas fa-diagnoses me-2"></i> Review Pending Diagnoses
                                    </button>
                                    <button class="btn btn-outline-success text-start">
                                        <i class="fas fa-comments me-2"></i> Farmer Messages
                                    </button>
                                    <button class="btn btn-outline-success text-start">
                                        <i class="fas fa-calendar-check me-2"></i> Upcoming Visits
                                    </button>
                                    <button class="btn btn-outline-success text-start">
                                        <i class="fas fa-file-alt me-2"></i> Create Advisory Template
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Assigned Farmers and Map Row -->
                <div class="row">
                    <div class="col-md-8">
                        <div class="card">
                            <div class="card-header d-flex justify-content-between align-items-center">
                                <span>Recent Field Reports</span>
                                <div class="dropdown">
                                    <button class="btn btn-sm btn-outline-secondary dropdown-toggle" type="button"
                                        data-bs-toggle="dropdown">
                                        Filter by Crop
                                    </button>
                                    <ul class="dropdown-menu dropdown-menu-end">
                                        <li><a class="dropdown-item" href="#">All Crops</a></li>
                                        <li><a class="dropdown-item" href="#">Tomatoes</a></li>
                                        <li><a class="dropdown-item" href="#">Corn</a></li>
                                        <li><a class="dropdown-item" href="#">Wheat</a></li>
                                    </ul>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th scope="col">Farmer</th>
                                                <th scope="col">Crop</th>
                                                <th scope="col">Issue</th>
                                                <th scope="col">Date</th>
                                                <th scope="col">Status</th>
                                                <th scope="col">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td>John Doe</td>
                                                <td>Tomatoes</td>
                                                <td>Leaf spots</td>
                                                <td>Today</td>
                                                <td><span class="badge bg-warning">Pending</span></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">Review</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Green Valley Co-op</td>
                                                <td>Corn</td>
                                                <td>Rust suspected</td>
                                                <td>Yesterday</td>
                                                <td><span class="badge bg-info">Diagnosed</span></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-primary">Follow-up</button>
                                                </td>
                                            </tr>
                                            <tr>
                                                <td>Maria Garcia</td>
                                                <td>Wheat</td>
                                                <td>Yellowing</td>
                                                <td>2 days ago</td>
                                                <td><span class="badge bg-success">Resolved</span></td>
                                                <td>
                                                    <button class="btn btn-sm btn-outline-secondary">View</button>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-4">
                        <div class="card">
                            <div class="card-header">
                                Farmer Locations
                            </div>
                            <div class="card-body p-0">
                                <div id="map" class="map-container" aria-label="Interactive map of farmer locations">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Analytics Preview -->
                <div class="row mt-4">
                    <div class="col-12">
                        <div class="card">
                            <div class="card-header">
                                Disease Trends in Your Region
                            </div>
                            <div class="card-body">
                                <div class="row">
                                    <div class="col-md-8">
                                        <canvas id="diseaseChart" height="300"></canvas>
                                    </div>
                                    <div class="col-md-4">
                                        <h5>Top 3 Current Issues</h5>
                                        <div class="list-group">
                                            <a href="#" class="list-group-item list-group-item-action">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <h6 class="mb-1">Tomato Late Blight</h6>
                                                    <small>12 cases</small>
                                                </div>
                                                <small class="text-muted">Wet conditions increasing spread</small>
                                            </a>
                                            <a href="#" class="list-group-item list-group-item-action">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <h6 class="mb-1">Corn Rust</h6>
                                                    <small>8 cases</small>
                                                </div>
                                                <small class="text-muted">New strain detected</small>
                                            </a>
                                            <a href="#" class="list-group-item list-group-item-action">
                                                <div class="d-flex w-100 justify-content-between">
                                                    <h6 class="mb-1">Wheat Powdery Mildew</h6>
                                                    <small>5 cases</small>
                                                </div>
                                                <small class="text-muted">Early season outbreak</small>
                                            </a>
                                        </div>
                                        <button class="btn btn-sm btn-outline-success mt-3 w-100">
                                            View Full Analytics <i class="fas fa-arrow-right ms-1"></i>
                                        </button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>


            </div>
        </div>
    </div>

    <!-- Add this modal at the bottom of your HTML, before the scripts -->
    <!-- Field Report Detail Modal -->
    <div class="modal fade" id="reportDetailModal" tabindex="-1" aria-labelledby="reportDetailModalLabel"
        aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="reportDetailModalLabel">Field Report #FR-2023-0425</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card mb-3">
                                <div class="card-header">
                                    <h6>Report Information</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row mb-2">
                                        <div class="col-sm-4 text-muted">Farmer:</div>
                                        <div class="col-sm-8">John Doe</div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-sm-4 text-muted">Location:</div>
                                        <div class="col-sm-8">Nairobi West, Block 12</div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-sm-4 text-muted">Date:</div>
                                        <div class="col-sm-8">April 25, 2023 • 10:30 AM</div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-sm-4 text-muted">Crop:</div>
                                        <div class="col-sm-8">Tomatoes (Variety: Rio Grande)</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4 text-muted">Growth Stage:</div>
                                        <div class="col-sm-8">Fruiting (Week 6)</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header">
                                    <h6>Diagnosis Summary</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row mb-2">
                                        <div class="col-sm-4 text-muted">Issue:</div>
                                        <div class="col-sm-8"><span class="badge bg-danger">Late Blight</span></div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-sm-4 text-muted">Severity:</div>
                                        <div class="col-sm-8">
                                            <div class="progress" style="height: 6px;">
                                                <div class="progress-bar bg-danger" style="width: 75%"></div>
                                            </div>
                                            <small>Moderate to Severe</small>
                                        </div>
                                    </div>
                                    <div class="row mb-2">
                                        <div class="col-sm-4 text-muted">Affected Area:</div>
                                        <div class="col-sm-8">~30% of field</div>
                                    </div>
                                    <div class="row">
                                        <div class="col-sm-4 text-muted">Reported By:</div>
                                        <div class="col-sm-8">Agronomist Sarah M.</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="row mb-4">
                        <div class="col-md-6">
                            <div class="card">
                                <div class="card-header d-flex justify-content-between align-items-center">
                                    <h6>Field Images</h6>
                                    <button class="btn btn-sm btn-outline-primary">
                                        <i class="fas fa-expand me-1"></i> View Full Size
                                    </button>
                                </div>
                                <div class="card-body">
                                    <div class="row">
                                        <div class="col-6 mb-3">
                                            <img src="https://images.unsplash.com/photo-1518977676601-b53f82aba655?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8Mnx8dG9tYXRvJTIwYmxpZ2h0fGVufDB8fDB8fHww"
                                                class="img-fluid rounded" alt="Tomato blight symptoms"
                                                data-bs-toggle="modal" data-bs-target="#imageModal">
                                        </div>
                                        <div class="col-6 mb-3">
                                            <img src="https://images.unsplash.com/photo-1589927986089-35812388d1f4?w=500&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8M3x8dG9tYXRvJTIwYmxpZ2h0fGVufDB8fDB8fHww"
                                                class="img-fluid rounded" alt="Tomato blight close-up"
                                                data-bs-toggle="modal" data-bs-target="#imageModal">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card h-100">
                                <div class="card-header">
                                    <h6>Environmental Conditions</h6>
                                </div>
                                <div class="card-body">
                                    <div class="row text-center mb-3">
                                        <div class="col-4">
                                            <div class="text-muted small">Temperature</div>
                                            <div class="h4">24°C</div>
                                        </div>
                                        <div class="col-4">
                                            <div class="text-muted small">Humidity</div>
                                            <div class="h4">82%</div>
                                        </div>
                                        <div class="col-4">
                                            <div class="text-muted small">Rainfall</div>
                                            <div class="h4">15mm</div>
                                        </div>
                                    </div>
                                    <div class="alert alert-warning">
                                        <i class="fas fa-exclamation-triangle me-2"></i>
                                        Conditions favorable for disease spread. High humidity and recent rainfall
                                        increase risk.
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card mb-4">
                        <div class="card-header">
                            <h6>Field Observations</h6>
                        </div>
                        <div class="card-body">
                            <p>Irregular brown lesions on leaves with white fungal growth on undersides during humid
                                conditions. Lesions initially appear on older leaves and spread upward. Some fruit
                                showing dark, sunken lesions. Disease appears to be spreading from the northeast corner
                                of the field where drainage is poor.</p>

                            <div class="mt-3">
                                <h6>Symptoms Checklist</h6>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="symptom1" checked>
                                    <label class="form-check-label" for="symptom1">Brown lesions on leaves</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="symptom2" checked>
                                    <label class="form-check-label" for="symptom2">White fungal growth</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="symptom3" checked>
                                    <label class="form-check-label" for="symptom3">Lesions on stems</label>
                                </div>
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="symptom4">
                                    <label class="form-check-label" for="symptom4">Wilting plants</label>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="card">
                        <div class="card-header d-flex justify-content-between align-items-center">
                            <h6>Recommended Actions</h6>
                            <button class="btn btn-sm btn-success">
                                <i class="fas fa-paper-plane me-1"></i> Send to Farmer
                            </button>
                        </div>
                        <div class="card-body">
                            <div class="alert alert-danger">
                                <i class="fas fa-exclamation-circle me-2"></i>
                                <strong>Urgent Action Required:</strong> This disease can spread rapidly and cause
                                complete crop loss if not treated immediately.
                            </div>

                            <h6 class="mt-3">Immediate Actions</h6>
                            <ol>
                                <li>Remove and destroy severely infected plants (burn or bury deep)</li>
                                <li>Apply copper-based fungicide (e.g., Bordeaux mixture) to all plants</li>
                                <li>Improve air circulation by pruning lower leaves</li>
                                <li>Avoid overhead irrigation</li>
                            </ol>

                            <h6 class="mt-3">Long-term Prevention</h6>
                            <ul>
                                <li>Rotate crops with non-solanaceous plants for 3-4 years</li>
                                <li>Plant resistant varieties next season (e.g., Mountain Magic, Defiant)</li>
                                <li>Improve field drainage in affected areas</li>
                                <li>Apply mulch to prevent soil splash</li>
                            </ul>

                            <div class="mt-3">
                                <h6>Follow-up Schedule</h6>
                                <div class="list-group">
                                    <div class="list-group-item">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h6 class="mb-1">Initial Treatment</h6>
                                            <small>Today</small>
                                        </div>
                                        <p class="mb-1">Apply first fungicide treatment</p>
                                    </div>
                                    <div class="list-group-item">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h6 class="mb-1">Follow-up Inspection</h6>
                                            <small>April 28, 2023</small>
                                        </div>
                                        <p class="mb-1">Assess treatment effectiveness</p>
                                    </div>
                                    <div class="list-group-item">
                                        <div class="d-flex w-100 justify-content-between">
                                            <h6 class="mb-1">Second Treatment</h6>
                                            <small>May 2, 2023</small>
                                        </div>
                                        <p class="mb-1">Apply systemic fungicide if needed</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">
                        <i class="fas fa-edit me-1"></i> Edit Report
                    </button>
                    <button type="button" class="btn btn-success">
                        <i class="fas fa-print me-1"></i> Print Report
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Image Modal -->
    <div class="modal fade" id="imageModal" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title">Field Image</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body text-center">
                    <img src="" class="img-fluid" id="modalImage" alt="Field condition">
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">
                        <i class="fas fa-download me-1"></i> Download
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- New Field Report Modal -->
    <div class="modal fade" id="newReportModal" tabindex="-1" aria-labelledby="newReportModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="newReportModalLabel">Create New Field Report</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="reportFarmer" class="form-label">Farmer</label>
                                <select class="form-select" id="reportFarmer" required>
                                    <option value="">Select Farmer</option>
                                    <option value="1">John Doe</option>
                                    <option value="2">Maria Garcia</option>
                                    <option value="3">Green Valley Co-op</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="reportDate" class="form-label">Visit Date</label>
                                <input type="datetime-local" class="form-control" id="reportDate" required>
                            </div>
                        </div>

                        <div class="row mb-3">
                            <div class="col-md-6">
                                <label for="reportCrop" class="form-label">Crop</label>
                                <select class="form-select" id="reportCrop" required>
                                    <option value="">Select Crop</option>
                                    <option value="tomato">Tomatoes</option>
                                    <option value="corn">Corn</option>
                                    <option value="wheat">Wheat</option>
                                    <option value="potato">Potatoes</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="reportGrowthStage" class="form-label">Growth Stage</label>
                                <select class="form-select" id="reportGrowthStage" required>
                                    <option value="">Select Stage</option>
                                    <option value="seedling">Seedling</option>
                                    <option value="vegetative">Vegetative</option>
                                    <option value="flowering">Flowering</option>
                                    <option value="fruiting" selected>Fruiting</option>
                                    <option value="harvest">Harvest</option>
                                </select>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="reportLocation" class="form-label">Field Location</label>
                            <div class="input-group">
                                <input type="text" class="form-control" id="reportLocation"
                                    placeholder="Enter field location">
                                <button class="btn btn-outline-secondary" type="button" id="mapLocation">
                                    <i class="fas fa-map-marker-alt"></i> Map
                                </button>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Field Conditions</label>
                            <div class="row">
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">Temperature (°C)</label>
                                    <input type="number" class="form-control" placeholder="25">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">Humidity (%)</label>
                                    <input type="number" class="form-control" placeholder="65">
                                </div>
                                <div class="col-md-4 mb-3">
                                    <label class="form-label">Rainfall (mm)</label>
                                    <input type="number" class="form-control" placeholder="10">
                                </div>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="reportImages" class="form-label">Field Images</label>
                            <div class="border rounded p-3 text-center bg-light">
                                <i class="fas fa-images fa-3x text-muted mb-2"></i>
                                <p class="text-muted">Upload images showing field conditions</p>
                                <input type="file" class="form-control" id="reportImages" multiple accept="image/*">
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="reportObservations" class="form-label">Observations</label>
                            <textarea class="form-control" id="reportObservations" rows="4"
                                placeholder="Describe what you observed in the field..."></textarea>
                        </div>

                        <div class="mb-3">
                            <label class="form-label">Potential Issues</label>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="issueDisease">
                                <label class="form-check-label" for="issueDisease">Disease</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="issuePest">
                                <label class="form-check-label" for="issuePest">Pest</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="issueNutrient">
                                <label class="form-check-label" for="issueNutrient">Nutrient Deficiency</label>
                            </div>
                            <div class="form-check">
                                <input class="form-check-input" type="checkbox" id="issueWater">
                                <label class="form-check-label" for="issueWater">Water Stress</label>
                            </div>
                        </div>

                        <div class="mb-3">
                            <label for="reportDiagnosis" class="form-label">Preliminary Diagnosis</label>
                            <select class="form-select" id="reportDiagnosis">
                                <option value="">Select Diagnosis</option>
                                <option value="late_blight">Late Blight</option>
                                <option value="early_blight">Early Blight</option>
                                <option value="rust">Rust</option>
                                <option value="mildew">Powdery Mildew</option>
                                <option value="other">Other</option>
                            </select>
                        </div>

                        <div class="mb-3">
                            <label for="reportRecommendations" class="form-label">Recommended Actions</label>
                            <textarea class="form-control" id="reportRecommendations" rows="4"
                                placeholder="Enter your recommendations for the farmer..."></textarea>
                        </div>

                        <div class="form-check mb-3">
                            <input class="form-check-input" type="checkbox" id="reportUrgent">
                            <label class="form-check-label" for="reportUrgent">
                                Mark as urgent (requires immediate attention)
                            </label>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="button" class="btn btn-outline-primary">
                        <i class="fas fa-save me-1"></i> Save Draft
                    </button>
                    <button type="button" class="btn btn-primary">
                        <i class="fas fa-check me-1"></i> Submit Report
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Add this script to handle image modal -->
    <script>
        // Handle image modal
        document.addEventListener('DOMContentLoaded', function () {
            var imageModal = document.getElementById('imageModal');
            imageModal.addEventListener('show.bs.modal', function (event) {
                var button = event.relatedTarget;
                var imgSrc = button.getAttribute('src');
                var modalImage = document.getElementById('modalImage');
                modalImage.src = imgSrc;
            });
        });
    </script>

    <!-- Bootstrap JS Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
    <script>
        // Initialize Map
        var map = L.map('map').setView([37.7749, -122.4194], 12);
        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);

        // Add farmer locations
        L.marker([37.7749, -122.4194]).addTo(map)
            .bindPopup("<b>John's Farm</b><br>Tomatoes - Leaf spots");

        L.marker([37.8044, -122.4113]).addTo(map)
            .bindPopup("<b>Green Valley Co-op</b><br>Corn - Rust suspected");

        L.marker([37.7219, -122.4758]).addTo(map)
            .bindPopup("<b>Maria Garcia</b><br>Wheat - Yellowing");

        // Initialize Chart
        const ctx = document.getElementById('diseaseChart').getContext('2d');
        const diseaseChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug'],
                datasets: [{
                    label: 'Tomato Late Blight',
                    data: [2, 3, 5, 4, 6, 8, 10, 12],
                    borderColor: '#d32f2f',
                    fill: false
                }, {
                    label: 'Corn Rust',
                    data: [1, 2, 3, 3, 4, 5, 6, 8],
                    borderColor: '#ffa000',
                    fill: false
                }, {
                    label: 'Wheat Powdery Mildew',
                    data: [0, 1, 1, 2, 2, 3, 4, 5],
                    borderColor: '#0288d1',
                    fill: false
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
    </script>
</body>

</html>